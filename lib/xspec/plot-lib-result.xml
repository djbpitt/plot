<?xml version="1.0" encoding="UTF-8"?>
<x:report xmlns:djb="http://www.obdurodon.org"
          xmlns:f="http://www.obdurodon.org/function-variables"
          xmlns:x="http://www.jenitennison.com/xslt/xspec"
          xmlns:xs="http://www.w3.org/2001/XMLSchema"
          stylesheet="file:/Users/djb/repos/plot/lib/plot-lib.xsl"
          date="2020-06-29T17:10:03.167-04:00"
          xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
   <x:scenario id="scenario1" xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
      <x:label>Scenarios for testing function validate-points</x:label>
      <x:call function="djb:validate-points"/>
      <x:scenario id="scenario1-scenario1"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with valid input (at least three, no white-space, monotonic X)</x:label>
         <x:call>
            <x:param name="f:point-pairs" select="'1,2', '3,4', '5,6'"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}boolean('true')"/>
         <x:test id="scenario1-scenario1-expect1" successful="true">
            <x:label>Valid points (at least three, correct format, no white-space) should pass</x:label>
            <x:expect select="Q{http://www.w3.org/2001/XMLSchema}boolean('true')"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario1-scenario2"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with too few points</x:label>
         <x:call>
            <x:param name="f:point-pairs" select="'1,2', '3,4'"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}boolean('false')"/>
         <x:test id="scenario1-scenario2-expect1" successful="true">
            <x:label>Fewer than three points should fail</x:label>
            <x:expect select="Q{http://www.w3.org/2001/XMLSchema}boolean('false')"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario1-scenario3"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with non-monotonic X</x:label>
         <x:call>
            <x:param name="f:point-pairs" select="'1,2', '5,4', '3,6'"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}boolean('false')"/>
         <x:test id="scenario1-scenario3-expect1" successful="true">
            <x:label>Non-monotonic X should fail</x:label>
            <x:expect select="Q{http://www.w3.org/2001/XMLSchema}boolean('false')"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario1-scenario4"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with incorrect white-space</x:label>
         <x:call>
            <x:param name="f:point-pairs" select="'1, 2', '3,4', '5,6'"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}boolean('false')"/>
         <x:test id="scenario1-scenario4-expect1" successful="true">
            <x:label>White space inside point should fail</x:label>
            <x:expect select="Q{http://www.w3.org/2001/XMLSchema}boolean('false')"/>
         </x:test>
      </x:scenario>
   </x:scenario>
   <x:scenario id="scenario2" xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
      <x:label>Scenario for testing function random-sequence</x:label>
      <x:call function="djb:random-sequence">
         <x:param name="count" select="100"/>
      </x:call>
      <x:result select="Q{http://www.w3.org/2001/XMLSchema}double('0.5133821097034696'), Q{http://www.w3.org/2001/XMLSchema}double('0.4758843898149987'), Q{http://www.w3.org/2001/XMLSchema}double('0.44113736188946107'), Q{http://www.w3.org/2001/XMLSchema}double('0.3845645872354375'), Q{http://www.w3.org/2001/XMLSchema}double('0.47949277330085616'), Q{http://www.w3.org/2001/XMLSchema}double('0.7547991039205036'), Q{http://www.w3.org/2001/XMLSchema}double('0.599750665896403'), Q{http://www.w3.org/2001/XMLSchema}double('0.3860728643459125'), Q{http://www.w3.org/2001/XMLSchema}double('0.03858406484665078'), Q{http://www.w3.org/2001/XMLSchema}double('0.006031297427869564'), Q{http://www.w3.org/2001/XMLSchema}double('0.8120908786087445'), Q{http://www.w3.org/2001/XMLSchema}double('0.5114810431763802'), Q{http://www.w3.org/2001/XMLSchema}double('0.9138371469096361'), Q{http://www.w3.org/2001/XMLSchema}double('0.6035067063362367'), Q{http://www.w3.org/2001/XMLSchema}double('0.7812848284681673'), Q{http://www.w3.org/2001/XMLSchema}double('0.4617769976689713'), Q{http://www.w3.org/2001/XMLSchema}double('0.7366122702251869'), Q{http://www.w3.org/2001/XMLSchema}double('0.32648565184470624'), Q{http://www.w3.org/2001/XMLSchema}double('0.21930715985846017'), Q{http://www.w3.org/2001/XMLSchema}double('0.1998000381757069'), Q{http://www.w3.org/2001/XMLSchema}double('0.001967514247362745'), Q{http://www.w3.org/2001/XMLSchema}double('0.7550971762118714'), Q{http://www.w3.org/2001/XMLSchema}double('0.002708770337715438'), Q{http://www.w3.org/2001/XMLSchema}double('0.8254626728337684'), Q{http://www.w3.org/2001/XMLSchema}double('0.5401034089334567'), Q{http://www.w3.org/2001/XMLSchema}double('0.4920214193938094'), Q{http://www.w3.org/2001/XMLSchema}double('0.6213446669774557'), Q{http://www.w3.org/2001/XMLSchema}double('0.6800145548589364'), Q{http://www.w3.org/2001/XMLSchema}double('0.8598850253255391'), Q{http://www.w3.org/2001/XMLSchema}double('0.11329468302134171'), Q{http://www.w3.org/2001/XMLSchema}double('0.27295477443939853'), Q{http://www.w3.org/2001/XMLSchema}double('0.9981261605638859'), Q{http://www.w3.org/2001/XMLSchema}double('0.5040956185190464'), Q{http://www.w3.org/2001/XMLSchema}double('0.2571686975396017'), Q{http://www.w3.org/2001/XMLSchema}double('0.09182650992279306'), Q{http://www.w3.org/2001/XMLSchema}double('0.30615829797050975'), Q{http://www.w3.org/2001/XMLSchema}double('0.9962402728837105'), Q{http://www.w3.org/2001/XMLSchema}double('0.6336832536528348'), Q{http://www.w3.org/2001/XMLSchema}double('0.17522463296888446'), Q{http://www.w3.org/2001/XMLSchema}double('0.001520734348770092'), Q{http://www.w3.org/2001/XMLSchema}double('0.2407800341232057'), Q{http://www.w3.org/2001/XMLSchema}double('0.09466449152629641'), Q{http://www.w3.org/2001/XMLSchema}double('0.05514805811802559'), Q{http://www.w3.org/2001/XMLSchema}double('0.3023905706044814'), Q{http://www.w3.org/2001/XMLSchema}double('0.7379744757995564'), Q{http://www.w3.org/2001/XMLSchema}double('0.08228192999371797'), Q{http://www.w3.org/2001/XMLSchema}double('0.5590177333307575'), Q{http://www.w3.org/2001/XMLSchema}double('0.7785298110217472'), Q{http://www.w3.org/2001/XMLSchema}double('0.35309245190467786'), Q{http://www.w3.org/2001/XMLSchema}double('0.08012429391384235'), Q{http://www.w3.org/2001/XMLSchema}double('0.8221568991969516'), Q{http://www.w3.org/2001/XMLSchema}double('0.30026608910401487'), Q{http://www.w3.org/2001/XMLSchema}double('0.7750688386829064'), Q{http://www.w3.org/2001/XMLSchema}double('0.22672876331842906'), Q{http://www.w3.org/2001/XMLSchema}double('0.8840373665698282'), Q{http://www.w3.org/2001/XMLSchema}double('0.7526438388394675'), Q{http://www.w3.org/2001/XMLSchema}double('0.9194418798003119'), Q{http://www.w3.org/2001/XMLSchema}double('0.40677109045180304'), Q{http://www.w3.org/2001/XMLSchema}double('0.47670140355138113'), Q{http://www.w3.org/2001/XMLSchema}double('0.44545113252518453'), Q{http://www.w3.org/2001/XMLSchema}double('0.483521225906116'), Q{http://www.w3.org/2001/XMLSchema}double('0.09176001347950369'), Q{http://www.w3.org/2001/XMLSchema}double('0.6924631231774733'), Q{http://www.w3.org/2001/XMLSchema}double('0.363108253378304'), Q{http://www.w3.org/2001/XMLSchema}double('0.15335756307168036'), Q{http://www.w3.org/2001/XMLSchema}double('0.5078946053589712'), Q{http://www.w3.org/2001/XMLSchema}double('0.8437450606293281'), Q{http://www.w3.org/2001/XMLSchema}double('0.30727484977081'), Q{http://www.w3.org/2001/XMLSchema}double('0.14430271653246562'), Q{http://www.w3.org/2001/XMLSchema}double('0.9914341776326859'), Q{http://www.w3.org/2001/XMLSchema}double('0.6649789810656004'), Q{http://www.w3.org/2001/XMLSchema}double('0.43951448610682564'), Q{http://www.w3.org/2001/XMLSchema}double('0.6550633805748161'), Q{http://www.w3.org/2001/XMLSchema}double('0.9462122873281325'), Q{http://www.w3.org/2001/XMLSchema}double('0.9362052366535973'), Q{http://www.w3.org/2001/XMLSchema}double('0.34185394532795665'), Q{http://www.w3.org/2001/XMLSchema}double('0.7592603410596033'), Q{http://www.w3.org/2001/XMLSchema}double('0.9641499035835314'), Q{http://www.w3.org/2001/XMLSchema}double('0.4379634415591537'), Q{http://www.w3.org/2001/XMLSchema}double('0.7322845339279987'), Q{http://www.w3.org/2001/XMLSchema}double('0.8850552861771694'), Q{http://www.w3.org/2001/XMLSchema}double('0.25933751844981423'), Q{http://www.w3.org/2001/XMLSchema}double('0.4447458980356329'), Q{http://www.w3.org/2001/XMLSchema}double('0.3897455707411509'), Q{http://www.w3.org/2001/XMLSchema}double('0.657387919018962'), Q{http://www.w3.org/2001/XMLSchema}double('0.36957369315186683'), Q{http://www.w3.org/2001/XMLSchema}double('0.19568290078061457'), Q{http://www.w3.org/2001/XMLSchema}double('0.6006930017234373'), Q{http://www.w3.org/2001/XMLSchema}double('0.8066667067115805'), Q{http://www.w3.org/2001/XMLSchema}double('0.1354050821203474'), Q{http://www.w3.org/2001/XMLSchema}double('0.08528150704828541'), Q{http://www.w3.org/2001/XMLSchema}double('0.256135039323207'), Q{http://www.w3.org/2001/XMLSchema}double('0.8474729935619139'), Q{http://www.w3.org/2001/XMLSchema}double('0.7206645013914277'), Q{http://www.w3.org/2001/XMLSchema}double('0.8877093753002825'), Q{http://www.w3.org/2001/XMLSchema}double('0.39158632165025653'), Q{http://www.w3.org/2001/XMLSchema}double('0.25436087964130305'), Q{http://www.w3.org/2001/XMLSchema}double('0.5549477340844527'), Q{http://www.w3.org/2001/XMLSchema}double('0.1541204609754423'), Q{http://www.w3.org/2001/XMLSchema}double('0.11759002721601974')"/>
      <x:test id="scenario2-expect1" successful="true">
         <x:label>Count should equal 100, ranging between 0 and 1</x:label>
         <x:expect test="count($x:result) eq 100 and min($x:result) gt 0 and max($x:result) lt 1"
                   select="()"/>
      </x:test>
   </x:scenario>
   <x:scenario id="scenario3" xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
      <x:label>Scenarios for testing function get-weights-scale#3</x:label>
      <x:call function="djb:get-weights-scale"/>
      <x:scenario id="scenario3-scenario1"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with Gaussian kernel</x:label>
         <x:call>
            <x:param name="f:kernel" select="'gaussian'"/>
            <x:param name="f:window-size" select="$djb:window-size"/>
            <x:param name="f:stddev" select="5"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('0.9801986733067553'), Q{http://www.w3.org/2001/XMLSchema}double('0.9231163463866358'), Q{http://www.w3.org/2001/XMLSchema}double('0.835270211411272'), Q{http://www.w3.org/2001/XMLSchema}double('0.7261490370736909'), Q{http://www.w3.org/2001/XMLSchema}double('0.6065306597126334'), Q{http://www.w3.org/2001/XMLSchema}double('0.4867522559599717'), Q{http://www.w3.org/2001/XMLSchema}double('0.37531109885139957'), Q{http://www.w3.org/2001/XMLSchema}double('0.27803730045319414'), Q{http://www.w3.org/2001/XMLSchema}double('0.19789869908361465'), Q{http://www.w3.org/2001/XMLSchema}double('0.1353352832366127'), Q{http://www.w3.org/2001/XMLSchema}double('0.08892161745938634'), Q{http://www.w3.org/2001/XMLSchema}double('0.056134762834133725'), Q{http://www.w3.org/2001/XMLSchema}double('0.034047454734599344'), Q{http://www.w3.org/2001/XMLSchema}double('0.019841094744370288'), Q{http://www.w3.org/2001/XMLSchema}double('0.011108996538242306'), Q{http://www.w3.org/2001/XMLSchema}double('0.005976022895005943'), Q{http://www.w3.org/2001/XMLSchema}double('0.0030887154082367687')"/>
         <x:test id="scenario3-scenario1-expect1" successful="true">
            <x:label>desending Gaussian values (n = window-size + 1)</x:label>
            <x:expect select="1, 0.9801986733067553, 0.9231163463866358, 0.835270211411272, 0.7261490370736909, 0.6065306597126334, 0.4867522559599717, 0.37531109885139957, 0.27803730045319414, 0.19789869908361465, 0.1353352832366127, 0.08892161745938634, 0.056134762834133725, 0.034047454734599344, 0.019841094744370288, 0.011108996538242306, 0.005976022895005943, 0.0030887154082367687"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario3-scenario2"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with rectangular kernel</x:label>
         <x:call>
            <x:param name="f:kernel" select="'rectangular'"/>
            <x:param name="f:window-size" select="$djb:window-size"/>
            <x:param name="f:stddev" select="5"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1')"/>
         <x:test id="scenario3-scenario2-expect1" successful="true">
            <x:label>rectangular values (n = window-size + 1)</x:label>
            <x:expect select="1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario3-scenario3"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with exponential kernel</x:label>
         <x:call>
            <x:param name="f:kernel" select="'exponential'"/>
            <x:param name="f:window-size" select="$djb:window-size"/>
            <x:param name="f:stddev" select="5"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('0.5'), Q{http://www.w3.org/2001/XMLSchema}double('0.25'), Q{http://www.w3.org/2001/XMLSchema}double('0.125'), Q{http://www.w3.org/2001/XMLSchema}double('0.0625'), Q{http://www.w3.org/2001/XMLSchema}double('0.03125'), Q{http://www.w3.org/2001/XMLSchema}double('0.015625'), Q{http://www.w3.org/2001/XMLSchema}double('0.0078125'), Q{http://www.w3.org/2001/XMLSchema}double('0.00390625'), Q{http://www.w3.org/2001/XMLSchema}double('0.001953125'), Q{http://www.w3.org/2001/XMLSchema}double('0.0009765625'), Q{http://www.w3.org/2001/XMLSchema}double('0.00048828125'), Q{http://www.w3.org/2001/XMLSchema}double('0.000244140625'), Q{http://www.w3.org/2001/XMLSchema}double('0.0001220703125'), Q{http://www.w3.org/2001/XMLSchema}double('0.00006103515625'), Q{http://www.w3.org/2001/XMLSchema}double('0.000030517578125'), Q{http://www.w3.org/2001/XMLSchema}double('0.0000152587890625'), Q{http://www.w3.org/2001/XMLSchema}double('0.00000762939453125')"/>
         <x:test id="scenario3-scenario3-expect1" successful="true">
            <x:label>exponential values</x:label>
            <x:expect select="1, 0.5, 0.25, 0.125, 0.0625, 0.03125, 0.015625, 0.0078125, 0.00390625, 0.001953125, 0.0009765625, 0.00048828125, 0.000244140625, 0.0001220703125, 0.00006103515625, 0.000030517578125, 0.0000152587890625, 0.00000762939453125"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario3-scenario4"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with parabolic-up kernel</x:label>
         <x:call>
            <x:param name="f:kernel" select="'parabolic-up'"/>
            <x:param name="f:window-size" select="$djb:window-size"/>
            <x:param name="f:stddev" select="5"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('0.8858131487889274'), Q{http://www.w3.org/2001/XMLSchema}double('0.7785467128027681'), Q{http://www.w3.org/2001/XMLSchema}double('0.6782006920415224'), Q{http://www.w3.org/2001/XMLSchema}double('0.5847750865051903'), Q{http://www.w3.org/2001/XMLSchema}double('0.4982698961937717'), Q{http://www.w3.org/2001/XMLSchema}double('0.41868512110726647'), Q{http://www.w3.org/2001/XMLSchema}double('0.34602076124567477'), Q{http://www.w3.org/2001/XMLSchema}double('0.28027681660899656'), Q{http://www.w3.org/2001/XMLSchema}double('0.22145328719723184'), Q{http://www.w3.org/2001/XMLSchema}double('0.1695501730103806'), Q{http://www.w3.org/2001/XMLSchema}double('0.12456747404844293'), Q{http://www.w3.org/2001/XMLSchema}double('0.08650519031141869'), Q{http://www.w3.org/2001/XMLSchema}double('0.05536332179930796'), Q{http://www.w3.org/2001/XMLSchema}double('0.031141868512110732'), Q{http://www.w3.org/2001/XMLSchema}double('0.01384083044982699'), Q{http://www.w3.org/2001/XMLSchema}double('0.0034602076124567475'), Q{http://www.w3.org/2001/XMLSchema}double('0')"/>
         <x:test id="scenario3-scenario4-expect1" successful="true">
            <x:label>parabolic values, opening up</x:label>
            <x:expect select="1, 0.8858131487889274, 0.7785467128027681, 0.6782006920415224, 0.5847750865051903, 0.4982698961937717, 0.41868512110726647, 0.34602076124567477, 0.28027681660899656, 0.22145328719723184, 0.1695501730103806, 0.12456747404844293, 0.08650519031141869, 0.05536332179930796, 0.031141868512110732, 0.01384083044982699, 0.0034602076124567475, 0"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario3-scenario5"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with parabolic-down kernel</x:label>
         <x:call>
            <x:param name="f:kernel" select="'parabolic-down'"/>
            <x:param name="f:window-size" select="$djb:window-size"/>
            <x:param name="f:stddev" select="5"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('0.9965397923875432'), Q{http://www.w3.org/2001/XMLSchema}double('0.986159169550173'), Q{http://www.w3.org/2001/XMLSchema}double('0.9688581314878892'), Q{http://www.w3.org/2001/XMLSchema}double('0.9446366782006921'), Q{http://www.w3.org/2001/XMLSchema}double('0.9134948096885813'), Q{http://www.w3.org/2001/XMLSchema}double('0.8754325259515571'), Q{http://www.w3.org/2001/XMLSchema}double('0.8304498269896194'), Q{http://www.w3.org/2001/XMLSchema}double('0.7785467128027681'), Q{http://www.w3.org/2001/XMLSchema}double('0.7197231833910034'), Q{http://www.w3.org/2001/XMLSchema}double('0.6539792387543253'), Q{http://www.w3.org/2001/XMLSchema}double('0.5813148788927336'), Q{http://www.w3.org/2001/XMLSchema}double('0.5017301038062283'), Q{http://www.w3.org/2001/XMLSchema}double('0.4152249134948097'), Q{http://www.w3.org/2001/XMLSchema}double('0.32179930795847755'), Q{http://www.w3.org/2001/XMLSchema}double('0.2214532871972319'), Q{http://www.w3.org/2001/XMLSchema}double('0.11418685121107264'), Q{http://www.w3.org/2001/XMLSchema}double('0')"/>
         <x:test id="scenario3-scenario5-expect1" successful="true">
            <x:label>parabolic values, opening down</x:label>
            <x:expect select="1, 0.9965397923875432, 0.986159169550173, 0.9688581314878892, 0.9446366782006921, 0.9134948096885813, 0.8754325259515571, 0.8304498269896194, 0.7785467128027681, 0.7197231833910034, 0.6539792387543253, 0.5813148788927336, 0.5017301038062283, 0.4152249134948097, 0.32179930795847755, 0.2214532871972319, 0.11418685121107264, 0"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario3-scenario6"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with invalid kernel</x:label>
         <x:call>
            <x:param name="f:kernel" select="'dummy'"/>
            <x:param name="f:window-size" select="$djb:window-size"/>
            <x:param name="f:stddev" select="5"/>
         </x:call>
         <x:result select="/*">
            <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"err":map{"column-number":19,"line-number":161,"module":"file:/Users/djb/repos/plot/lib/plot-lib.xsl","code":Q{http://www.w3.org/2005/xqt-errors}FOER0000,"value":(),"description":"Invalid kernel type: dummy; must be one of: gaussian, rectangular, exponential, parabolic-up, or parabolic-down"}}</pseudo-map>
         </x:result>
         <x:test id="scenario3-scenario6-expect1" successful="true">
            <x:label>err:description</x:label>
            <x:result select="'Invalid kernel type: dummy; must be one of: gaussian, rectangular, exponential, parabolic-up, or parabolic-down'"/>
            <x:expect test="$x:result?err?description"
                      select="'Invalid kernel type: dummy; must be one of: gaussian, rectangular, exponential, parabolic-up, or parabolic-down'"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario3-scenario7"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with invalid window-size</x:label>
         <x:call>
            <x:param name="f:kernel" select="'gaussian'"/>
            <x:param name="f:window-size" select="10"/>
            <x:param name="f:stddev" select="5"/>
         </x:call>
         <x:result select="/*">
            <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"err":map{"column-number":15,"line-number":127,"module":"file:/Users/djb/repos/plot/lib/plot-lib.xsl","code":Q{http://www.w3.org/2005/xqt-errors}FOER0000,"value":(),"description":"Invalid window size: 10; window size must be odd integer greater than 3"}}</pseudo-map>
         </x:result>
         <x:test id="scenario3-scenario7-expect1" successful="true">
            <x:label>err:description</x:label>
            <x:result select="'Invalid window size: 10; window size must be odd integer greater than 3'"/>
            <x:expect test="$x:result?err?description"
                      select="'Invalid window size: 10; window size must be odd integer greater than 3'"/>
         </x:test>
      </x:scenario>
   </x:scenario>
   <x:scenario id="scenario4" xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
      <x:label>Scenario for testing function get-weights-scale#2 with Gaussian kernel</x:label>
      <x:call function="djb:get-weights-scale">
         <x:param name="f:kernel" select="'gaussian'"/>
         <x:param name="f:window-size" select="$djb:window-size"/>
      </x:call>
      <x:result select="Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('0.9801986733067553'), Q{http://www.w3.org/2001/XMLSchema}double('0.9231163463866358'), Q{http://www.w3.org/2001/XMLSchema}double('0.835270211411272'), Q{http://www.w3.org/2001/XMLSchema}double('0.7261490370736909'), Q{http://www.w3.org/2001/XMLSchema}double('0.6065306597126334'), Q{http://www.w3.org/2001/XMLSchema}double('0.4867522559599717'), Q{http://www.w3.org/2001/XMLSchema}double('0.37531109885139957'), Q{http://www.w3.org/2001/XMLSchema}double('0.27803730045319414'), Q{http://www.w3.org/2001/XMLSchema}double('0.19789869908361465'), Q{http://www.w3.org/2001/XMLSchema}double('0.1353352832366127'), Q{http://www.w3.org/2001/XMLSchema}double('0.08892161745938634'), Q{http://www.w3.org/2001/XMLSchema}double('0.056134762834133725'), Q{http://www.w3.org/2001/XMLSchema}double('0.034047454734599344'), Q{http://www.w3.org/2001/XMLSchema}double('0.019841094744370288'), Q{http://www.w3.org/2001/XMLSchema}double('0.011108996538242306'), Q{http://www.w3.org/2001/XMLSchema}double('0.005976022895005943'), Q{http://www.w3.org/2001/XMLSchema}double('0.0030887154082367687')"/>
      <x:test id="scenario4-expect1" successful="true">
         <x:label>desending Gaussian values (n = window-size + 1)</x:label>
         <x:expect select="1, 0.9801986733067553, 0.9231163463866358, 0.835270211411272, 0.7261490370736909, 0.6065306597126334, 0.4867522559599717, 0.37531109885139957, 0.27803730045319414, 0.19789869908361465, 0.1353352832366127, 0.08892161745938634, 0.056134762834133725, 0.034047454734599344, 0.019841094744370288, 0.011108996538242306, 0.005976022895005943, 0.0030887154082367687"/>
      </x:test>
   </x:scenario>
   <x:scenario id="scenario5" xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
      <x:label>Scenario for testing function get-weighted-points</x:label>
      <x:call function="djb:get-weighted-points"/>
      <x:scenario id="scenario5-scenario1"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with gaussian kernel</x:label>
         <x:call>
            <x:param name="f:points" as="xs:string+" select="$djb:points"/>
            <x:param name="f:kernel" as="xs:string" select="'gaussian'"/>
            <x:param name="f:window-size" as="xs:integer" select="3"/>
            <x:param name="f:stddev" as="xs:double" select="5"/>
         </x:call>
         <x:result select="'50,-146.39269215417212', '100,-145.14046352967915', '150,-147.5919868899796', '200,-128.42139058903746', '250,-123.21739518185211', '300,-79.62207506994312', '350,-106.02342173610471', '400,-121.76587182155168', '450,-122.51647913005985'"/>
         <x:test id="scenario5-scenario1-expect1" successful="true">
            <x:label>should return adjusted points as sequence of strings</x:label>
            <x:expect select="'50,-146.39269215417212', '100,-145.14046352967915', '150,-147.5919868899796', '200,-128.42139058903746', '250,-123.21739518185211', '300,-79.62207506994312', '350,-106.02342173610471', '400,-121.76587182155168', '450,-122.51647913005985'"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario5-scenario2"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with rectangular kernel</x:label>
         <x:call>
            <x:param name="f:points" as="xs:string+" select="$djb:points"/>
            <x:param name="f:kernel" as="xs:string" select="'rectangular'"/>
            <x:param name="f:window-size" as="xs:integer" select="3"/>
            <x:param name="f:stddev" as="xs:double" select="5"/>
         </x:call>
         <x:result select="'50,-145', '100,-145', '150,-148', '200,-128', '250,-123.33333333333333', '300,-79.66666666666667', '350,-106.33333333333333', '400,-121.33333333333333', '450,-121.33333333333333'"/>
         <x:test id="scenario5-scenario2-expect1" successful="true">
            <x:label>should return adjusted points as sequence of strings</x:label>
            <x:expect select="'50,-145', '100,-145', '150,-148', '200,-128', '250,-123.33333333333333', '300,-79.66666666666667', '350,-106.33333333333333', '400,-121.33333333333333', '450,-121.33333333333333'"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario5-scenario3"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with exponential kernel</x:label>
         <x:call>
            <x:param name="f:points" as="xs:string+" select="$djb:points"/>
            <x:param name="f:kernel" as="xs:string" select="'exponential'"/>
            <x:param name="f:window-size" as="xs:integer" select="3"/>
            <x:param name="f:stddev" as="xs:double" select="5"/>
         </x:call>
         <x:result select="'50,-163.85714285714286', '100,-150.25', '150,-132.75', '200,-143.75', '250,-119', '300,-78', '350,-94.75', '400,-137.5', '450,-129.14285714285714'"/>
         <x:test id="scenario5-scenario3-expect1" successful="true">
            <x:label>should return adjusted points as sequence of strings</x:label>
            <x:expect select="'50,-163.85714285714286', '100,-150.25', '150,-132.75', '200,-143.75', '250,-119', '300,-78', '350,-94.75', '400,-137.5', '450,-129.14285714285714'"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario5-scenario4"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with parabolic-up kernel</x:label>
         <x:call>
            <x:param name="f:points" as="xs:string+" select="$djb:points"/>
            <x:param name="f:kernel" as="xs:string" select="'parabolic-up'"/>
            <x:param name="f:window-size" as="xs:integer" select="3"/>
            <x:param name="f:stddev" as="xs:double" select="5"/>
         </x:call>
         <x:result select="'50,-170.64285714285714', '100,-151.1764705882353', '150,-130.05882352941177', '200,-146.52941176470588', '250,-118.23529411764706', '300,-77.70588235294117', '350,-92.70588235294116', '400,-140.35294117647058', '450,-133.28571428571428'"/>
         <x:test id="scenario5-scenario4-expect1" successful="true">
            <x:label>should return adjusted points as sequence of strings</x:label>
            <x:expect select="'50,-170.64285714285714', '100,-151.1764705882353', '150,-130.05882352941177', '200,-146.52941176470588', '250,-118.23529411764706', '300,-77.70588235294117', '350,-92.70588235294116', '400,-140.35294117647058', '450,-133.28571428571428'"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario5-scenario5"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with parabolic-down kernel</x:label>
         <x:call>
            <x:param name="f:points" as="xs:string+" select="$djb:points"/>
            <x:param name="f:kernel" as="xs:string" select="'parabolic-down'"/>
            <x:param name="f:window-size" as="xs:integer" select="3"/>
            <x:param name="f:stddev" as="xs:double" select="5"/>
         </x:call>
         <x:result select="'50,-154.59090909090907', '100,-145.84', '150,-145.56', '200,-130.52', '250,-122.63999999999999', '300,-79.39999999999999', '350,-104.47999999999999', '400,-123.91999999999999', '450,-129.54545454545453'"/>
         <x:test id="scenario5-scenario5-expect1" successful="true">
            <x:label>should return adjusted points as sequence of strings</x:label>
            <x:expect select="'50,-154.59090909090907', '100,-145.84', '150,-145.56', '200,-130.52', '250,-122.63999999999999', '300,-79.39999999999999', '350,-104.47999999999999', '400,-123.91999999999999', '450,-129.54545454545453'"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario5-scenario6"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with invalid kernel</x:label>
         <x:call>
            <x:param name="f:points" as="xs:string+" select="$djb:points"/>
            <x:param name="f:kernel" as="xs:string" select="'no-such-kernel'"/>
            <x:param name="f:window-size" as="xs:integer" select="3"/>
            <x:param name="f:stddev" as="xs:double" select="5"/>
         </x:call>
         <x:result select="/*">
            <pseudo-map xmlns="http://www.jenitennison.com/xslt/xspec">map{"err":map{"column-number":19,"line-number":161,"module":"file:/Users/djb/repos/plot/lib/plot-lib.xsl","code":Q{http://www.w3.org/2005/xqt-errors}FOER0000,"value":(),"description":"Invalid kernel type: no-such-kernel; must be one of: gaussian, rectangular, exponential, parabolic-up, or parabolic-down"}}</pseudo-map>
         </x:result>
         <x:test id="scenario5-scenario6-expect1" successful="true">
            <x:label>err:description</x:label>
            <x:result select="'Invalid kernel type: no-such-kernel; must be one of: gaussian, rectangular, exponential, parabolic-up, or parabolic-down'"/>
            <x:expect test="$x:result?err?description"
                      select="'Invalid kernel type: no-such-kernel; must be one of: gaussian, rectangular, exponential, parabolic-up, or parabolic-down'"/>
         </x:test>
      </x:scenario>
   </x:scenario>
   <x:scenario id="scenario6" xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
      <x:label>Scenario for testing function gaussian</x:label>
      <x:call function="djb:gaussian">
         <x:param name="f:x" select="5"/>
         <x:param name="f:peak" select="1"/>
         <x:param name="f:mean" select="1"/>
         <x:param name="f:stddev" select="5"/>
      </x:call>
      <x:result select="Q{http://www.w3.org/2001/XMLSchema}double('0.7261490370736909')"/>
      <x:test id="scenario6-expect1" successful="true">
         <x:label>Gaussian value for input with parameters</x:label>
         <x:expect select="0.7261490370736909"/>
      </x:test>
   </x:scenario>
   <x:scenario id="scenario7" xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
      <x:label>Scenarios for testing function round-to-odd</x:label>
      <x:call function="djb:round-to-odd"/>
      <x:scenario id="scenario7-scenario1"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with odd value</x:label>
         <x:call>
            <x:param name="input" select="5"/>
         </x:call>
         <x:result select="5"/>
         <x:test id="scenario7-scenario1-expect1" successful="true">
            <x:label>Return unchanged</x:label>
            <x:expect select="5"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario7-scenario2"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with even value</x:label>
         <x:call>
            <x:param name="input" select="4"/>
         </x:call>
         <x:result select="5"/>
         <x:test id="scenario7-scenario2-expect1" successful="true">
            <x:label>Round up to odd</x:label>
            <x:expect select="5"/>
         </x:test>
      </x:scenario>
   </x:scenario>
   <x:scenario id="scenario8" xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
      <x:label>Scenario for testing function recenter</x:label>
      <x:call function="djb:recenter">
         <x:param name="f:input-values" select="1, 2, 3, 4, 5"/>
         <x:param name="f:new-min" select="1"/>
         <x:param name="f:new-max" select="10"/>
      </x:call>
      <x:result select="Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('3.25'), Q{http://www.w3.org/2001/XMLSchema}double('5.5'), Q{http://www.w3.org/2001/XMLSchema}double('7.75'), Q{http://www.w3.org/2001/XMLSchema}double('10')"/>
      <x:test id="scenario8-expect1" successful="true">
         <x:label>Recenters input range</x:label>
         <x:expect select="1, 3.25, 5.5, 7.75, 10"/>
      </x:test>
   </x:scenario>
   <x:scenario id="scenario9" xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
      <x:label>Scenario for testing function expand-to-tenths</x:label>
      <x:call function="djb:expand-to-tenths">
         <x:param name="f:half" select="2"/>
      </x:call>
      <x:result select="Q{http://www.w3.org/2001/XMLSchema}double('-2'), Q{http://www.w3.org/2001/XMLSchema}double('-1.9'), Q{http://www.w3.org/2001/XMLSchema}double('-1.8'), Q{http://www.w3.org/2001/XMLSchema}double('-1.7'), Q{http://www.w3.org/2001/XMLSchema}double('-1.6'), Q{http://www.w3.org/2001/XMLSchema}double('-1.5'), Q{http://www.w3.org/2001/XMLSchema}double('-1.4'), Q{http://www.w3.org/2001/XMLSchema}double('-1.3'), Q{http://www.w3.org/2001/XMLSchema}double('-1.2'), Q{http://www.w3.org/2001/XMLSchema}double('-1.1'), Q{http://www.w3.org/2001/XMLSchema}double('-1'), Q{http://www.w3.org/2001/XMLSchema}double('-0.9'), Q{http://www.w3.org/2001/XMLSchema}double('-0.8'), Q{http://www.w3.org/2001/XMLSchema}double('-0.7'), Q{http://www.w3.org/2001/XMLSchema}double('-0.6'), Q{http://www.w3.org/2001/XMLSchema}double('-0.5'), Q{http://www.w3.org/2001/XMLSchema}double('-0.4'), Q{http://www.w3.org/2001/XMLSchema}double('-0.3'), Q{http://www.w3.org/2001/XMLSchema}double('-0.2'), Q{http://www.w3.org/2001/XMLSchema}double('-0.1'), Q{http://www.w3.org/2001/XMLSchema}double('0'), Q{http://www.w3.org/2001/XMLSchema}double('0.1'), Q{http://www.w3.org/2001/XMLSchema}double('0.2'), Q{http://www.w3.org/2001/XMLSchema}double('0.3'), Q{http://www.w3.org/2001/XMLSchema}double('0.4'), Q{http://www.w3.org/2001/XMLSchema}double('0.5'), Q{http://www.w3.org/2001/XMLSchema}double('0.6'), Q{http://www.w3.org/2001/XMLSchema}double('0.7'), Q{http://www.w3.org/2001/XMLSchema}double('0.8'), Q{http://www.w3.org/2001/XMLSchema}double('0.9'), Q{http://www.w3.org/2001/XMLSchema}double('1'), Q{http://www.w3.org/2001/XMLSchema}double('1.1'), Q{http://www.w3.org/2001/XMLSchema}double('1.2'), Q{http://www.w3.org/2001/XMLSchema}double('1.3'), Q{http://www.w3.org/2001/XMLSchema}double('1.4'), Q{http://www.w3.org/2001/XMLSchema}double('1.5'), Q{http://www.w3.org/2001/XMLSchema}double('1.6'), Q{http://www.w3.org/2001/XMLSchema}double('1.7'), Q{http://www.w3.org/2001/XMLSchema}double('1.8'), Q{http://www.w3.org/2001/XMLSchema}double('1.9'), Q{http://www.w3.org/2001/XMLSchema}double('2')"/>
      <x:test id="scenario9-expect1" successful="true">
         <x:label>-2 to 2 by tenths</x:label>
         <x:expect select="-2, -1.9, -1.8, -1.7, -1.6, -1.5, -1.4, -1.3, -1.2, -1.1, -1, -0.9, -0.8, -0.7, -0.6, -0.5, -0.4, -0.3, -0.2, -0.1, 0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2"/>
      </x:test>
   </x:scenario>
   <x:scenario id="scenario10" xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
      <x:label>Scenarios for testing function uniform</x:label>
      <x:call function="djb:uniform"/>
      <x:scenario id="scenario10-scenario1"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with uniform true values</x:label>
         <x:call>
            <x:param name="f:seq" select="true(), true(), true()"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}boolean('true')"/>
         <x:test id="scenario10-scenario1-expect1" successful="true">
            <x:label>Uniform true Booleans return true</x:label>
            <x:expect select="Q{http://www.w3.org/2001/XMLSchema}boolean('true')"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario10-scenario2"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with uniform false values</x:label>
         <x:call>
            <x:param name="f:seq" select="false(), false(), false()"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}boolean('true')"/>
         <x:test id="scenario10-scenario2-expect1" successful="true">
            <x:label>Uniform false Booleans return true</x:label>
            <x:expect select="Q{http://www.w3.org/2001/XMLSchema}boolean('true')"/>
         </x:test>
      </x:scenario>
      <x:scenario id="scenario10-scenario3"
                  xspec="file:/Users/djb/repos/plot/lib/plot-lib.xspec">
         <x:label>with mixed values</x:label>
         <x:call>
            <x:param name="f:seq" select="false(), true(), false()"/>
         </x:call>
         <x:result select="Q{http://www.w3.org/2001/XMLSchema}boolean('false')"/>
         <x:test id="scenario10-scenario3-expect1" successful="true">
            <x:label>Mixed Booleans return false</x:label>
            <x:expect select="Q{http://www.w3.org/2001/XMLSchema}boolean('false')"/>
         </x:test>
      </x:scenario>
   </x:scenario>
</x:report>
